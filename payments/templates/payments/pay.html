<!DOCTYPE html>
<html lang="en">
{% load i18n %}
<head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Hermes Payment</title>
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
            crossorigin="anonymous"></script>
</head>

<body>
      <style type="text/css">
            *,
            *::before,
            *::after {
                  box-sizing: border-box;
                  margin: 0;
                  padding: 0;
                  outline: none !important;
                  vertical-align: baseline;
                  font: inherit;
            }

            ::before,
            ::after {
                  box-sizing: border-box;
                  vertical-align: inherit;
                  text-decoration: inherit;
            }

            html {
                  border-radius: 0;
                  overflow-y: scroll;
                  -webkit-text-size-adjust: 100%;
                  -ms-text-size-adjust: 100%;
                  text-rendering: optimizeLegibility;
                  text-rendering: geometricPrecision;
                  -moz-font-smoothing: antialiased;
                  -webkit-font-smoothing: antialiased;
                  -moz-osx-font-smoothing: grayscale;
            }



            @media (min-width: 980px) {
                  html {
                        font-size: 14px;
                  }
            }

            .wrapper {
                  position: relative;
                  margin: 0 auto;
                  padding: 30px 0;
            }

            @media (min-width: 980px) {
                  .wrapper {
                        padding: 100px 30px 50px;
                  }
            }

            .c-crypto-form {
                  margin: 0 auto;
                  padding: 16px;
                  width: 100%;
                  max-width: 828px;
            }

            @media (min-width: 980px) {
                  .c-crypto-form {
                        padding: 0;
                  }
            }

            .c-crypto-form__heading {
                  display: none;
                  margin-bottom: 16px;
                  font-size: 23px;
                  font-weight: 700;
            }

            @media (min-width: 980px) {
                  .c-crypto-form__heading {
                        display: block;
                  }
            }

            .c-crypto-form__subheading {
                  margin-bottom: 16px;
                  font-size: 12px;
                  font-weight: 500;
            }

            @media (min-width: 980px) {
                  .c-crypto-form__subheading {
                        font-size: 18px;
                        font-weight: 700;
                  }
            }

            .c-crypto-form__box {
                  padding: 16px 0;
            }

            @media (min-width: 980px) {
                  .c-crypto-form__box {
                        padding: 16px;
                        border: 2px solid #848283;
                  }
            }


            .c-crypto-form__row {}

            @media (min-width: 980px) {
                  .c-crypto-form__row {
                        display: -webkit-box;
                        display: -ms-flexbox;
                        display: flex;
                        -webkit-box-orient: horizontal;
                        -webkit-box-direction: normal;
                        -ms-flex-flow: row nowrap;
                        flex-flow: row nowrap;
                        width: 100%;
                  }
            }

            .c-crypto-form__col-left {
                  margin: 0 auto 30px;
                  width: 200px;
                  height: 200px;
            }

            @media (min-width: 980px) {
                  .c-crypto-form__col-left {
                        -webkit-box-flex: 0;
                        -ms-flex: 0 0 auto;
                        flex: 0 0 auto;
                        margin: 0;
                  }
            }

            .c-crypto-form__col-right {}

            @media (min-width: 980px) {
                  .c-crypto-form__col-right {
                        -webkit-box-flex: 1;
                        -ms-flex: 1 1 auto;
                        flex: 1 1 auto;
                        padding-left: 16px;
                        position: relative;
                        overflow: hidden;
                  }
            }

            .c-crypto-form__qr-code {
                  display: block;
                  width: 100%;
            }

            .c-crypto-form__field,
            .c-crypto-form__area {
                  margin-bottom: 16px;
                  padding: 10px 16px;
                  background: #FFF;
            }

            .c-crypto-form__field {
                  display: -webkit-box;
                  display: -ms-flexbox;
                  display: flex;
                  -webkit-box-orient: horizontal;
                  -webkit-box-direction: normal;
                  -ms-flex-flow: row nowrap;
                  flex-flow: row nowrap;
                  -webkit-box-align: center;
                  -ms-flex-align: center;
                  align-items: center;
                  width: 100%;
            }

            @media (min-width: 980px) {
                  .c-crypto-form__area {
                        display: -webkit-box;
                        display: -ms-flexbox;
                        display: flex;
                        -webkit-box-orient: horizontal;
                        -webkit-box-direction: normal;
                        -ms-flex-flow: row nowrap;
                        flex-flow: row nowrap;
                        -webkit-box-align: center;
                        -ms-flex-align: center;
                        align-items: center;
                        width: 100%;
                  }
            }

            .c-crypto-form__label {
                  -webkit-box-flex: 0;
                  -ms-flex: 0 0 auto;
                  flex: 0 0 auto;
                  padding-right: 15px;
                  font-size: 14px;
                  font-weight: 500;
                  text-transform: uppercase;
                  color: #BBB;
            }

            .c-crypto-form__area .c-crypto-form__label {
                  margin-bottom: 5px;
            }

            @media (min-width: 980px) {
                  .c-crypto-form__area .c-crypto-form__label {
                        margin-bottom: 0;
                  }
            }

            .c-crypto-form__value {
                  -webkit-box-flex: 1;
                  -ms-flex: 1 1 auto;
                  flex: 1 1 auto;
                  font-size: 14px;
                  font-weight: 500;
                  text-align: right;
                  word-break: break-all;
            }

            .c-crypto-form__area .c-crypto-form__value {
                  min-height: 40px;
                  text-align: left;
            }

            .c-crypto-form__warning-block {
                  padding: 15px 11px;
                  border-left: 4px solid #FFFFFF;
                  background: #FFFFFF;
            }

            @media (min-width: 980px) {
                  .c-crypto-form__warning-block {
                        padding: 18px 16px;
                        border-left: none;
                  }
            }

            .c-crypto-form__warning {
                  margin-bottom: 32px;
            }

            .c-crypto-form__warning:last-child {
                  margin-bottom: 0px;
            }

            @media (min-width: 980px) {
                  .c-crypto-form__warning {
                        padding-left: 55px;
                        min-height: 34px;
                        background-repeat: no-repeat;
                        background-position: left top;
                        background-size: auto 34px;
                  }
            }

            .c-crypto-form__warning p {
                  font-size: 13px;
                  line-height: 1.3;
            }

            .c-crypto-form__warning .__sm {
                  font-size: 12px;
            }

            .c-crypto-form__warning b {
                  font-weight: 500;
            }

            @media (min-width: 980px) {
                  .c-crypto-form__warning p {
                        font-size: 16px;
                        line-height: 1.4;
                  }

                  .c-crypto-form__warning .__sm {
                        font-size: 14px;
                  }
            }
      </style>


      </head>

      <body>
            <div class="wrapper">
                  <div class="c-crypto-form">
                        <div class="c-crypto-form__heading">
                        </div>
                        <div class="c-crypto-form__box">
                              <div class="c-crypto-form__row">
                                    <div class="c-crypto-form__col-left">
                                          <img src=" https://api.qrserver.com/v1/create-qr-code/?data={{invoice.pay_url}}"
                                                class="c-crypto-form__qr-code" />
                                    </div>
                                    
                                    <div class="c-crypto-form__col-right">
                                          <div class="c-crypto-form__field">
                                                <div class="c-crypto-form__label">{% translate 'Валюта' %}</div>
                                                <div class="c-crypto-form__value">USDT</div>
                                          </div>
                                          <hr>
                                          <div class="c-crypto-form__field">
                                                <div class="c-crypto-form__label">{% translate 'Сеть' %}</div>
                                                <div class="c-crypto-form__value">TRC20</div>
                                          </div>
                                          <hr>
                                          <div class="c-crypto-form__field">
                                                <div class="c-crypto-form__label">{% translate 'Сумма' %}</div>
                                                <div class="c-crypto-form__value">${{invoice.amount}}</div>
                                          </div>
                                          <hr>
                                          <div class="c-crypto-form__field">
                                                <div class="c-crypto-form__label">URL</div>
                                                <a class="c-crypto-form__value" href="{{invoice.pay_url}}">{{invoice.pay_url}}</a>
                                          </div>
                                    </div>
                              </div>

                              <div class="c-crypto-form__warning-block">
                                    <div class="c-crypto-form__warning">
                                          <!-- <p>{% translate 'По этим реквизитам перевод доступен в течение' %} <b><span
                                                            id="timer">{{invoice.created_at}}</span></b>.</p> -->
                                                            <p>{% translate 'Ожидание оплаты....Осталось:' %} <div id="timer-js"></div></p>
                                          <hr>
                                    </div>
                              </div>
                        </div>
                  </div>
            </div>
      </body>
      <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
            integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
            crossorigin="anonymous">
      </script>

      <script>
        var countdownTime = 120 * 60; // Set the countdown time in seconds (2 hours = 120 minutes)
        
        // Check if there is a start time stored in local storage
        var startTime = new Date("{{invoice.created_at.isoformat}}");
        if (startTime) {
          var elapsedTime = Math.floor((Date.now() - Number(startTime)) / 1000);
          countdownTime -= elapsedTime;
        } else {
          localStorage.setItem("timerStartTime", Date.now());
        }
        
        function formatTime(time) {
          var hours = Math.floor(time / 3600);
          var minutes = Math.floor((time % 3600) / 60);
          var seconds = time % 60;
          return hours + "h " + minutes + "m " + seconds + "s";
        }
        
        function updateTimer() {
          var timerElement = document.getElementById("timer-js");
          timerElement.textContent = formatTime(countdownTime);
          
          if (countdownTime <= 0) {
            clearInterval(timerInterval);
            timerElement.textContent = "Время вышло";
          } else {
            countdownTime--;
          }
        }
        
        // Update the timer every second
        var timerInterval = setInterval(updateTimer, 1000);
      </script>
      
</html>